const hamburger=document.querySelector(".hamburger"),menu=document.querySelector(".menu"),closeElem=document.querySelector(".menu__close"),menuOverlay=document.querySelector(".menu__overlay"),promo=document.querySelector(".promo"),languages=document.querySelectorAll(".select_lang__item"),accordionButton=document.querySelector(".skills__more");function closeMenu(){menu.classList.remove("active"),document.body.style.overflowY="auto"}window.addEventListener("DOMContentLoaded",()=>{changeLanguage()}),hamburger.addEventListener("click",()=>{menu.classList.add("active"),document.body.style.overflowY="hidden"}),document.addEventListener("click",e=>{e.target==menuOverlay&&closeMenu()}),closeElem.addEventListener("click",()=>{closeMenu()});const counters=document.querySelectorAll(".skills__ratings-counter"),lines=document.querySelectorAll(".skills__ratings-line span");counters.forEach((e,t)=>{lines[t].style.width=e.innerHTML});const anchors=document.querySelectorAll('a[href*="#"]');anchors.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=e.getAttribute("href").substr(1);document.getElementById(n).scrollIntoView({behavior:"smooth",block:"start"}),closeMenu()})}),document.addEventListener("scroll",function(){const e=hamburger.querySelectorAll("span");pageYOffset>promo.offsetHeight?e.forEach(e=>{e.style.background="black"}):e.forEach(e=>{e.style.background="white"})});const skills_items=document.querySelector(".skills__items");let heightFirstRow,heightSecondRow,rowGap;function returnSizes(){const e=document.querySelector(".skills__items"),t=getComputedStyle(e).getPropertyValue("grid-template-rows").split(" ");heightFirstRow=Number(t[0].slice(0,-2)),heightSecondRow=Number(t[1].slice(0,-2)),rowGap=Number(getComputedStyle(e).rowGap.slice(0,-2))}function changeStateAccordion(){skills_items.offsetHeight>=skills_items.scrollHeight?(skills_items.style.height=heightFirstRow+heightSecondRow+rowGap+"px",accordionButton.innerText="More..."):(skills_items.style.height=skills_items.scrollHeight+2+"px",accordionButton.innerText="less...")}const observer=new ResizeObserver(e=>{for(let t of e)t.contentBoxSize&&returnSizes()});observer.observe(skills_items),accordionButton.addEventListener("click",changeStateAccordion);const existsLanguages=["en","ru"],changeUrlHash=e=>{location.href=window.location.pathname+"#"+e.dataset.value},changeLanguage=()=>{const e=window.location.hash.substring(1);existsLanguages.includes(e)||(location.href=window.location.pathname+"#en"),loadLanguage(e)};function loadLanguage(e){const t="/languages/"+e+"/content.json",n=new XMLHttpRequest;n.open("GET",t,!0),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){const e=JSON.parse(n.responseText);for(let t in e){let n=document.querySelectorAll(`[data-lang-${t}`);n&&n.forEach(n=>{n.innerText=e[t]})}document.querySelector(".skills__items");returnSizes(),changeStateAccordion()}},n.send()}languages.forEach(e=>e.addEventListener("click",e=>changeUrlHash(e.target))),window.addEventListener("hashchange",changeLanguage);const sendMessage=document.querySelector(".contacts__btn"),form=document.querySelector(".contacts__form");form.addEventListener("submit",e=>{e.preventDefault();document.querySelector('meta[name="token"]').getAttribute("content"),document.querySelector('meta[name="id"]').getAttribute("content");const t=new FormData(e.target);t.get("name"),t.get("email"),t.get("text");form.reset()});